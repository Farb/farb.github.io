<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="ArkTs自定义弹框 效果图：\n难点主要在于Dialog内部的自定义内容布局。涉及Stack布局及Stack嵌套、Body中使用了Scroll，最主要的是Scroll中的Column中使用了padding，给Header和Footer保留空间的高度。\n此外还涉及到父子组件双向通信使用@State、@ObjectLink和@Observed， 涉及父孙组件双向通信使用@Provide和@Consume。\n一个小技巧：通过在子组件中定义closeDialog?:()=>void,在子组件中关闭父组件中定义的dialog实例。\n实现代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 // 一个内容可以滚动的单选列表 @Entry @Component struct CustomDialogPage { @Provide selectedStudent: Student = new Student() dialogController: CustomDialogController = new CustomDialogController({ builder: MyCustomDialog({ cancel: this.onCancel, confirm: this.onConfirm }), alignment: DialogAlignment.Bottom, offset: { dy: 0, dx: 0 }, // 弹窗相对alignment所在位置的偏移量，即设置弹框相对于底部向上偏移10个vp autoCancel: true, // 点击弹框外的地方自动关闭 customStyle: true // 弹窗容器样式是否自定义。默认值：false，弹窗容器的宽度根据栅格系统自适应，不跟随子节点；高度自适应子节点，最大为窗口高度的90%；圆角为24vp }) onCancel() { // 注入取消钩子 console.log('onCancel') } onConfirm() { // 注入确定钩子 console.log('您点击了确定') } build() { Column() { Button('显示自定义弹窗') .onClick(() => { this.dialogController.open() }) Text('子组件当前选中的学生是：' + this.selectedStudent.name) .fontColor(Color.Red) } .margin(10) .width('100%') } } /** * 自定义弹窗组件 */ @CustomDialog struct MyCustomDialog { @State students: Student[] = [] controller: CustomDialogController cancel: () => void confirm: () => void aboutToAppear() { this.students = this.loadData() } loadData(): Array<Student> { // 加一个英文字符串，模拟器和预览器中不支持中文搜索 let names: string[] = ['Farb', '小明', '小红', '小刚', '小美', '小杜', '小帅', '小李', '小王', '小刘', '小杨', '小宋'] const data: Student[] = [] let i: number for (i = 0; i < names.length; i++) { data.push(new Student(i + 1, names[i])) } return data } build() { Stack({ alignContent: Alignment.Bottom }) { Stack({ alignContent: Alignment.Top }) { this.Header() this.Body() }.height('100%') // 保证内嵌的Stack高度也铺满整个容器，防止搜索时容器变小 .backgroundColor(Color.White) this.Footer() } .height('60%') // 弹框最占屏幕的60%高度 } /** * 显示头部信息：包括标题和搜索框 */ @Builder Header() { Column() { Text('请选择一个学生').fontSize(20).margin({ top: 10, bottom: 10 }) TextInput({ placeholder: '请输入学生姓名进行搜索' }) .placeholderColor('#ccc') .onChange(value => { if (value) { this.students = this.loadData().filter(item => item.name.toLowerCase().indexOf(value.toLowerCase()) >= 0) } else { this.students = this.loadData() } }) }.height(100) .padding(10) .zIndex(10) // 让Header位于最上面 .backgroundColor(Color.White) } /** * 显示主体列表 */ @Builder Body() { Scroll() { Column() { ForEach(this.students, (item: Student) => { StudentCard({ student: item, closeDialogFunc: () => { this.controller.close() // 关闭父组件的弹框 } }) }) } .padding({ // 这里要分别留出header和footer的高度 bottom: 50, top: 100 }) } .scrollBar(BarState.Off) } /** * 显示底部按钮 */ @Builder Footer() { Button('取消') .width('100%') .height(50) .fontSize(18) .fontWeight(FontWeight.Bold) .fontColor('#3CBEF5') .backgroundColor(Color.White) .type(ButtonType.Normal) .onClick(() => { this.controller.close() this.cancel(); }) } } /** * 封装每一行数据 */ @Component struct StudentCard { @ObjectLink student: Student @Consume selectedStudent: Student // 关闭父组件的弹框函数 closeDialogFunc?: () => void build() { Row() { Text(this.student.name) // 这里可根据需要调整布局，当前默认让student.name占据除了单选按钮的剩余所有空间 .layoutWeight(1) Radio({ value: '', group: 'default' }) .checked(this.student.isChecked) .onChange(isChecked => { // 每个单选按钮状态的变化都要同步到student属性isChecked上 this.student.isChecked = isChecked if (isChecked) { this.closeDialog() } }) } .border({ width: { bottom: 1, }, color: '#ddd' }) .padding(10) .justifyContent(FlexAlign.Center) .onClick(() => { this.student.isChecked = true this.closeDialog() }) .width('100%') } closeDialog() { if (this.closeDialogFunc) { this.selectedStudent = this.student this.closeDialogFunc() } } } @Observed class Student { id: number name: string isChecked: boolean constructor(id?: number, name: string = '', isChecked: boolean = false) { this.id = id this.name = name this.isChecked = isChecked } } "><title>鸿蒙界面开发--自定义弹窗内置可滚动的单选列表</title><link rel=canonical href=https://farb.github.io/p/arkts-customdialog/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="鸿蒙界面开发--自定义弹窗内置可滚动的单选列表"><meta property='og:description' content="ArkTs自定义弹框 效果图：\n难点主要在于Dialog内部的自定义内容布局。涉及Stack布局及Stack嵌套、Body中使用了Scroll，最主要的是Scroll中的Column中使用了padding，给Header和Footer保留空间的高度。\n此外还涉及到父子组件双向通信使用@State、@ObjectLink和@Observed， 涉及父孙组件双向通信使用@Provide和@Consume。\n一个小技巧：通过在子组件中定义closeDialog?:()=>void,在子组件中关闭父组件中定义的dialog实例。\n实现代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 // 一个内容可以滚动的单选列表 @Entry @Component struct CustomDialogPage { @Provide selectedStudent: Student = new Student() dialogController: CustomDialogController = new CustomDialogController({ builder: MyCustomDialog({ cancel: this.onCancel, confirm: this.onConfirm }), alignment: DialogAlignment.Bottom, offset: { dy: 0, dx: 0 }, // 弹窗相对alignment所在位置的偏移量，即设置弹框相对于底部向上偏移10个vp autoCancel: true, // 点击弹框外的地方自动关闭 customStyle: true // 弹窗容器样式是否自定义。默认值：false，弹窗容器的宽度根据栅格系统自适应，不跟随子节点；高度自适应子节点，最大为窗口高度的90%；圆角为24vp }) onCancel() { // 注入取消钩子 console.log('onCancel') } onConfirm() { // 注入确定钩子 console.log('您点击了确定') } build() { Column() { Button('显示自定义弹窗') .onClick(() => { this.dialogController.open() }) Text('子组件当前选中的学生是：' + this.selectedStudent.name) .fontColor(Color.Red) } .margin(10) .width('100%') } } /** * 自定义弹窗组件 */ @CustomDialog struct MyCustomDialog { @State students: Student[] = [] controller: CustomDialogController cancel: () => void confirm: () => void aboutToAppear() { this.students = this.loadData() } loadData(): Array<Student> { // 加一个英文字符串，模拟器和预览器中不支持中文搜索 let names: string[] = ['Farb', '小明', '小红', '小刚', '小美', '小杜', '小帅', '小李', '小王', '小刘', '小杨', '小宋'] const data: Student[] = [] let i: number for (i = 0; i < names.length; i++) { data.push(new Student(i + 1, names[i])) } return data } build() { Stack({ alignContent: Alignment.Bottom }) { Stack({ alignContent: Alignment.Top }) { this.Header() this.Body() }.height('100%') // 保证内嵌的Stack高度也铺满整个容器，防止搜索时容器变小 .backgroundColor(Color.White) this.Footer() } .height('60%') // 弹框最占屏幕的60%高度 } /** * 显示头部信息：包括标题和搜索框 */ @Builder Header() { Column() { Text('请选择一个学生').fontSize(20).margin({ top: 10, bottom: 10 }) TextInput({ placeholder: '请输入学生姓名进行搜索' }) .placeholderColor('#ccc') .onChange(value => { if (value) { this.students = this.loadData().filter(item => item.name.toLowerCase().indexOf(value.toLowerCase()) >= 0) } else { this.students = this.loadData() } }) }.height(100) .padding(10) .zIndex(10) // 让Header位于最上面 .backgroundColor(Color.White) } /** * 显示主体列表 */ @Builder Body() { Scroll() { Column() { ForEach(this.students, (item: Student) => { StudentCard({ student: item, closeDialogFunc: () => { this.controller.close() // 关闭父组件的弹框 } }) }) } .padding({ // 这里要分别留出header和footer的高度 bottom: 50, top: 100 }) } .scrollBar(BarState.Off) } /** * 显示底部按钮 */ @Builder Footer() { Button('取消') .width('100%') .height(50) .fontSize(18) .fontWeight(FontWeight.Bold) .fontColor('#3CBEF5') .backgroundColor(Color.White) .type(ButtonType.Normal) .onClick(() => { this.controller.close() this.cancel(); }) } } /** * 封装每一行数据 */ @Component struct StudentCard { @ObjectLink student: Student @Consume selectedStudent: Student // 关闭父组件的弹框函数 closeDialogFunc?: () => void build() { Row() { Text(this.student.name) // 这里可根据需要调整布局，当前默认让student.name占据除了单选按钮的剩余所有空间 .layoutWeight(1) Radio({ value: '', group: 'default' }) .checked(this.student.isChecked) .onChange(isChecked => { // 每个单选按钮状态的变化都要同步到student属性isChecked上 this.student.isChecked = isChecked if (isChecked) { this.closeDialog() } }) } .border({ width: { bottom: 1, }, color: '#ddd' }) .padding(10) .justifyContent(FlexAlign.Center) .onClick(() => { this.student.isChecked = true this.closeDialog() }) .width('100%') } closeDialog() { if (this.closeDialogFunc) { this.selectedStudent = this.student this.closeDialogFunc() } } } @Observed class Student { id: number name: string isChecked: boolean constructor(id?: number, name: string = '', isChecked: boolean = false) { this.id = id this.name = name this.isChecked = isChecked } } "><meta property='og:url' content='https://farb.github.io/p/arkts-customdialog/'><meta property='og:site_name' content="Farb's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='ArkTs'><meta property='article:published_time' content='2024-04-13T23:00:00+00:00'><meta property='article:modified_time' content='2024-04-13T23:00:00+00:00'><meta name=twitter:title content="鸿蒙界面开发--自定义弹窗内置可滚动的单选列表"><meta name=twitter:description content="ArkTs自定义弹框 效果图：\n难点主要在于Dialog内部的自定义内容布局。涉及Stack布局及Stack嵌套、Body中使用了Scroll，最主要的是Scroll中的Column中使用了padding，给Header和Footer保留空间的高度。\n此外还涉及到父子组件双向通信使用@State、@ObjectLink和@Observed， 涉及父孙组件双向通信使用@Provide和@Consume。\n一个小技巧：通过在子组件中定义closeDialog?:()=>void,在子组件中关闭父组件中定义的dialog实例。\n实现代码 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 // 一个内容可以滚动的单选列表 @Entry @Component struct CustomDialogPage { @Provide selectedStudent: Student = new Student() dialogController: CustomDialogController = new CustomDialogController({ builder: MyCustomDialog({ cancel: this.onCancel, confirm: this.onConfirm }), alignment: DialogAlignment.Bottom, offset: { dy: 0, dx: 0 }, // 弹窗相对alignment所在位置的偏移量，即设置弹框相对于底部向上偏移10个vp autoCancel: true, // 点击弹框外的地方自动关闭 customStyle: true // 弹窗容器样式是否自定义。默认值：false，弹窗容器的宽度根据栅格系统自适应，不跟随子节点；高度自适应子节点，最大为窗口高度的90%；圆角为24vp }) onCancel() { // 注入取消钩子 console.log('onCancel') } onConfirm() { // 注入确定钩子 console.log('您点击了确定') } build() { Column() { Button('显示自定义弹窗') .onClick(() => { this.dialogController.open() }) Text('子组件当前选中的学生是：' + this.selectedStudent.name) .fontColor(Color.Red) } .margin(10) .width('100%') } } /** * 自定义弹窗组件 */ @CustomDialog struct MyCustomDialog { @State students: Student[] = [] controller: CustomDialogController cancel: () => void confirm: () => void aboutToAppear() { this.students = this.loadData() } loadData(): Array<Student> { // 加一个英文字符串，模拟器和预览器中不支持中文搜索 let names: string[] = ['Farb', '小明', '小红', '小刚', '小美', '小杜', '小帅', '小李', '小王', '小刘', '小杨', '小宋'] const data: Student[] = [] let i: number for (i = 0; i < names.length; i++) { data.push(new Student(i + 1, names[i])) } return data } build() { Stack({ alignContent: Alignment.Bottom }) { Stack({ alignContent: Alignment.Top }) { this.Header() this.Body() }.height('100%') // 保证内嵌的Stack高度也铺满整个容器，防止搜索时容器变小 .backgroundColor(Color.White) this.Footer() } .height('60%') // 弹框最占屏幕的60%高度 } /** * 显示头部信息：包括标题和搜索框 */ @Builder Header() { Column() { Text('请选择一个学生').fontSize(20).margin({ top: 10, bottom: 10 }) TextInput({ placeholder: '请输入学生姓名进行搜索' }) .placeholderColor('#ccc') .onChange(value => { if (value) { this.students = this.loadData().filter(item => item.name.toLowerCase().indexOf(value.toLowerCase()) >= 0) } else { this.students = this.loadData() } }) }.height(100) .padding(10) .zIndex(10) // 让Header位于最上面 .backgroundColor(Color.White) } /** * 显示主体列表 */ @Builder Body() { Scroll() { Column() { ForEach(this.students, (item: Student) => { StudentCard({ student: item, closeDialogFunc: () => { this.controller.close() // 关闭父组件的弹框 } }) }) } .padding({ // 这里要分别留出header和footer的高度 bottom: 50, top: 100 }) } .scrollBar(BarState.Off) } /** * 显示底部按钮 */ @Builder Footer() { Button('取消') .width('100%') .height(50) .fontSize(18) .fontWeight(FontWeight.Bold) .fontColor('#3CBEF5') .backgroundColor(Color.White) .type(ButtonType.Normal) .onClick(() => { this.controller.close() this.cancel(); }) } } /** * 封装每一行数据 */ @Component struct StudentCard { @ObjectLink student: Student @Consume selectedStudent: Student // 关闭父组件的弹框函数 closeDialogFunc?: () => void build() { Row() { Text(this.student.name) // 这里可根据需要调整布局，当前默认让student.name占据除了单选按钮的剩余所有空间 .layoutWeight(1) Radio({ value: '', group: 'default' }) .checked(this.student.isChecked) .onChange(isChecked => { // 每个单选按钮状态的变化都要同步到student属性isChecked上 this.student.isChecked = isChecked if (isChecked) { this.closeDialog() } }) } .border({ width: { bottom: 1, }, color: '#ddd' }) .padding(10) .justifyContent(FlexAlign.Center) .onClick(() => { this.student.isChecked = true this.closeDialog() }) .width('100%') } closeDialog() { if (this.closeDialogFunc) { this.selectedStudent = this.student this.closeDialogFunc() } } } @Observed class Student { id: number name: string isChecked: boolean constructor(id?: number, name: string = '', isChecked: boolean = false) { this.id = id this.name = name this.isChecked = isChecked } } "><link rel="shortcut icon" href=/favicon.png><meta name=baidu-site-verification content="codeva-XtyrR4VjKV"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=https://s3.bmp.ovh/imgs/2024/04/25/1e5e17f5abe2b80d.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Farb's Blog</a></h1><h2 class=site-description>像水一样努力，终会水滴石穿</h2></div></header><ol class=menu-social><li><a href=https://gitee.com/farb target=_blank title=Gitee rel=me><!doctype html><svg t="1713884778674" class="icon" viewBox="0 0 1024 1024" p-id="10647" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M512 1024A512 512 0 11512 0a512 512 0 010 1024zm259.2-568.896H480.32a25.28 25.28.0 00-25.28 25.28v63.232c0 13.952 11.328 25.28 25.28 25.28h177.024c13.952.0 25.28 11.328 25.28 25.28v12.672c0 41.856-33.92 75.84-75.84 75.84H366.592a25.28 25.28.0 01-25.28-25.28V417.216c0-41.92 33.92-75.84 75.84-75.84h353.92a25.28 25.28.0 0025.28-25.344l.064-63.168a25.28 25.28.0 00-25.216-25.28H417.152A189.632 189.632.0 00227.52 417.216v353.92c0 14.016 11.328 25.28 25.28 25.28h372.992a170.624 170.624.0 00170.624-170.624V480.384a25.28 25.28.0 00-25.28-25.28z" fill="#C71D23" p-id="10648"/></svg></a></li><li><a href=https://github.com/farb target=_blank title=GitHub rel=me><!doctype html><svg t="1713884694671" class="icon" viewBox="0 0 1024 1024" p-id="9399" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M64 512c0 195.2 124.8 361.6 300.8 422.4 22.4 6.4 19.2-9.6 19.2-22.4v-76.8c-134.4 16-140.8-73.6-150.4-89.6-19.2-32-60.8-38.4-48-54.4 32-16 64 3.2 99.2 57.6 25.6 38.4 76.8 32 105.6 25.6 6.4-22.4 19.2-44.8 35.2-60.8C281.6 691.2 224 604.8 224 502.4c0-48 16-96 48-131.2-22.4-60.8.0-115.2 3.2-121.6 57.6-6.4 118.4 41.6 124.8 44.8 32-9.6 70.4-12.8 112-12.8s80 6.4 112 12.8c12.8-9.6 67.2-48 121.6-44.8 3.2 6.4 25.6 57.6 6.4 118.4 32 38.4 48 83.2 48 131.2.0 102.4-57.6 188.8-201.6 214.4 22.4 22.4 38.4 54.4 38.4 92.8v112c0 9.6.0 19.2 16 19.2C832 876.8 960 710.4 960 512c0-246.4-201.6-448-448-448S64 265.6 64 512z" fill="#040000" p-id="9400"/></svg></a></li><li><a href=https://leetcode.cn/u/int2147483647 target=_blank title=力扣 rel=me><!doctype html><svg t="1713884461345" class="icon" viewBox="0 0 1024 1024" p-id="4333" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M701.28 766.86a58.9 58.9.0 0183.1 83.52l-102.24 102c-94.3 94.16-248 95.52-344 3.16-.56-.52-43.26-42.4-184.12-180.54-93.72-92-103.06-238.94-14.88-333.36l164.44-176C391.12 172 552.46 161.68 652.54 242.6l149.34 120.78a58.92 58.92.0 01-74 91.76L578.54 334.36c-52.34-42.34-144-36.52-189.06 11.84l-164.44 176c-42.94 46-38.22 120 11.26 168.54l183.26 179.7c49.86 48 130.48 47.3 179.42-1.58z" fill="#FFA116" p-id="4334"/><path d="M452.94 664.7a58.96 58.96.0 010-118h434a58.96 58.96.0 010 118z" fill="#B3B3B3" p-id="4335"/><path d="M534.22 18.68a58.9 58.9.0 1186 80.56L225.1 522.28c-42.92 46-38.22 120 11.24 168.54l182.46 178.9A58.92 58.92.0 01336.46 954L154.06 775.08c-93.7-92-103.04-238.94-14.84-333.36z" p-id="4336"/></svg></a></li><li><a href=https://www.cnblogs.com/farb target=_blank title=博客园 rel=me><!doctype html><svg t="1713884612994" class="icon" viewBox="0 0 1024 1024" p-id="8439" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M851.40363594 172.59636406c-187.46181844-187.46181844-491.34545437-187.46181844-678.80727188.0-187.46181844 187.46181844-187.46181844 491.34545437.0 678.80727188 187.46181844 187.46181844 491.34545437 187.46181844 678.80727188.0 187.46181844-187.46181844 187.46181844-491.34545437.0-678.80727188zM387.33090875 728.08727281a47.08363594 47.08363594.0 11-66.63272719-66.50181843 47.08363594 47.08363594.0 0166.63272719 66.50181843zm205.52727281 1.39636313a38.74909125 38.74909125.0 01-76.62545437-11.52h-.04363594a6.54545437 6.54545437.0 00-.04363688.30545531V717.92c.30545438-2.61818156 2.05090875-20.72727281-2.96727281-44.98909125a174.24 174.24.0 00-48.56727281-89.28 172.10181844 172.10181844.0 00-88.8-48.30545438 156.69818156 156.69818156.0 00-42.45818156-2.92363593 38.66181844 38.66181844.0 01-35.38909125-65.32363688 38.61818156 38.61818156.0 0121.12-10.8218175v-.2181825c4.45090875-.74181844 111.14181844-16.45090875 200.33454562 72.74181844 89.01818156 89.01818156 74.18181844 196.14545438 73.44 200.72727281zm175.2 7.59272812a38.74909125 38.74909125.0 01-65.67272719 21.3818175 39.49090875 39.49090875.0 01-11.65090875-33.73090875c.08727281-.34909125 5.10545437-37.48363594-5.06181843-88.97454562C672.36363594 568.37818157 640.37818156 508.85818156 590.72 458.85090875c-50.00727281-49.70181844-109.52727281-81.64363594-176.94545438-94.95272719-51.49090875-10.16727281-88.58181844-5.19272719-89.01818156-5.14909031h.21818156-.04363687a39.92727281 39.92727281.0 01-44.68363594-32.90181844 38.83636406 38.83636406.0 0132.20363594-44.37818156c1.92-.30545438 47.86909125-7.33090875 111.27272719 4.36363594a411.75272719 411.75272719.0 01106.25454562 34.95272718A425.76 425.76.0 01644.61090875 403.04l.91636406.96.96.87272719a425.89090875 425.89090875.0 0182.25454563 114.72c16.40727281 33.6 28.14545437 69.29454562 34.99636312 106.21090875 11.65090875 63.40363594 4.66909125 109.35272719 4.32 111.27272812z" fill="#1296db" p-id="8440"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/%E9%93%BE%E6%8E%A5/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://farb.github.io/ selected>English</option><option value=https://farb.github.io/zh-cn/>中文</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#arkts自定义弹框>ArkTs自定义弹框</a></li><li><a href=#实现代码>实现代码</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/harmonyos/ style=background-color:#2a9d8f;color:#fff>鸿蒙/HarmonyOS/ArkTs</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/arkts-customdialog/>鸿蒙界面开发--自定义弹窗内置可滚动的单选列表</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2024-04-13</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>3 minute read</time></div><div class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time>Last updated on 2024-04-13 23:00:00</time></div></footer></div></header><section class=article-content><h2 id=arkts自定义弹框>ArkTs自定义弹框</h2><p>效果图：</p><p><img src=https://s3.bmp.ovh/imgs/2024/04/18/53456f1df9e8d441.gif loading=lazy></p><p>难点主要在于Dialog内部的自定义内容布局。涉及Stack布局及Stack嵌套、Body中使用了Scroll，最主要的是Scroll中的Column中使用了padding，给Header和Footer保留空间的高度。</p><p>此外还涉及到父子组件双向通信使用@State、@ObjectLink和@Observed，
涉及父孙组件双向通信使用@Provide和@Consume。</p><p>一个小技巧：通过在子组件中定义<code>closeDialog?:()=>void</code>,在子组件中关闭父组件中定义的dialog实例。</p><h2 id=实现代码>实现代码</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// 一个内容可以滚动的单选列表
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>@Entry</span>
</span></span><span class=line><span class=cl><span class=kd>@Component</span>
</span></span><span class=line><span class=cl><span class=nx>struct</span> <span class=nx>CustomDialogPage</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>@Provide</span> <span class=nx>selectedStudent</span>: <span class=kt>Student</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Student</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nx>dialogController</span>: <span class=kt>CustomDialogController</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>CustomDialogController</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>builder</span>: <span class=kt>MyCustomDialog</span><span class=p>({</span> <span class=nx>cancel</span>: <span class=kt>this.onCancel</span><span class=p>,</span> <span class=nx>confirm</span>: <span class=kt>this.onConfirm</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=nx>alignment</span>: <span class=kt>DialogAlignment.Bottom</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>offset</span><span class=o>:</span> <span class=p>{</span> <span class=nx>dy</span>: <span class=kt>0</span><span class=p>,</span> <span class=nx>dx</span>: <span class=kt>0</span> <span class=p>},</span> <span class=c1>// 弹窗相对alignment所在位置的偏移量，即设置弹框相对于底部向上偏移10个vp
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>autoCancel</span>: <span class=kt>true</span><span class=p>,</span> <span class=c1>// 点击弹框外的地方自动关闭
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>customStyle</span>: <span class=kt>true</span> <span class=c1>// 弹窗容器样式是否自定义。默认值：false，弹窗容器的宽度根据栅格系统自适应，不跟随子节点；高度自适应子节点，最大为窗口高度的90%；圆角为24vp
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>onCancel() {</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 注入取消钩子
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;onCancel&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>onConfirm() {</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 注入确定钩子
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;您点击了确定&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>build() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>Column() {</span>
</span></span><span class=line><span class=cl>      <span class=nx>Button</span><span class=p>(</span><span class=s1>&#39;显示自定义弹窗&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>onClick</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>this</span><span class=p>.</span><span class=nx>dialogController</span><span class=p>.</span><span class=nx>open</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>Text</span><span class=p>(</span><span class=s1>&#39;子组件当前选中的学生是：&#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>selectedStudent</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>fontColor</span><span class=p>(</span><span class=nx>Color</span><span class=p>.</span><span class=nx>Red</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>margin</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>width</span><span class=p>(</span><span class=s1>&#39;100%&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 自定义弹窗组件
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>@CustomDialog</span>
</span></span><span class=line><span class=cl><span class=nx>struct</span> <span class=nx>MyCustomDialog</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>@State</span> <span class=nx>students</span>: <span class=kt>Student</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>controller</span>: <span class=kt>CustomDialogController</span>
</span></span><span class=line><span class=cl>  <span class=nx>cancel</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=k>void</span>
</span></span><span class=line><span class=cl>  <span class=nx>confirm</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=k>void</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>aboutToAppear() {</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>students</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>loadData</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>loadData</span><span class=p>()</span><span class=o>:</span> <span class=nb>Array</span><span class=p>&lt;</span><span class=nt>Student</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 加一个英文字符串，模拟器和预览器中不支持中文搜索
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>names</span>: <span class=kt>string</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Farb&#39;</span><span class=p>,</span> <span class=s1>&#39;小明&#39;</span><span class=p>,</span> <span class=s1>&#39;小红&#39;</span><span class=p>,</span> <span class=s1>&#39;小刚&#39;</span><span class=p>,</span> <span class=s1>&#39;小美&#39;</span><span class=p>,</span> <span class=s1>&#39;小杜&#39;</span><span class=p>,</span> <span class=s1>&#39;小帅&#39;</span><span class=p>,</span> <span class=s1>&#39;小李&#39;</span><span class=p>,</span> <span class=s1>&#39;小王&#39;</span><span class=p>,</span> <span class=s1>&#39;小刘&#39;</span><span class=p>,</span> <span class=s1>&#39;小杨&#39;</span><span class=p>,</span> <span class=s1>&#39;小宋&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span>: <span class=kt>Student</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>i</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>names</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=k>new</span> <span class=nx>Student</span><span class=p>(</span><span class=nx>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>names</span><span class=p>[</span><span class=nx>i</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>data</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>build() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>Stack</span><span class=p>({</span> <span class=nx>alignContent</span>: <span class=kt>Alignment.Bottom</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>Stack</span><span class=p>({</span> <span class=nx>alignContent</span>: <span class=kt>Alignment.Top</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>Header</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>Body</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=p>}.</span><span class=nx>height</span><span class=p>(</span><span class=s1>&#39;100%&#39;</span><span class=p>)</span> <span class=c1>// 保证内嵌的Stack高度也铺满整个容器，防止搜索时容器变小
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>.</span><span class=nx>backgroundColor</span><span class=p>(</span><span class=nx>Color</span><span class=p>.</span><span class=nx>White</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>Footer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>height</span><span class=p>(</span><span class=s1>&#39;60%&#39;</span><span class=p>)</span> <span class=c1>// 弹框最占屏幕的60%高度
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>   * 显示头部信息：包括标题和搜索框
</span></span></span><span class=line><span class=cl><span class=cm>   */</span>
</span></span><span class=line><span class=cl>  <span class=kd>@Builder</span> <span class=nx>Header() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>Column() {</span>
</span></span><span class=line><span class=cl>      <span class=nx>Text</span><span class=p>(</span><span class=s1>&#39;请选择一个学生&#39;</span><span class=p>).</span><span class=nx>fontSize</span><span class=p>(</span><span class=mi>20</span><span class=p>).</span><span class=nx>margin</span><span class=p>({</span> <span class=nx>top</span>: <span class=kt>10</span><span class=p>,</span> <span class=nx>bottom</span>: <span class=kt>10</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=nx>TextInput</span><span class=p>({</span> <span class=nx>placeholder</span><span class=o>:</span> <span class=s1>&#39;请输入学生姓名进行搜索&#39;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>placeholderColor</span><span class=p>(</span><span class=s1>&#39;#ccc&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>onChange</span><span class=p>(</span><span class=nx>value</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>students</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>loadData</span><span class=p>().</span><span class=nx>filter</span><span class=p>(</span><span class=nx>item</span> <span class=o>=&gt;</span> <span class=nx>item</span><span class=p>.</span><span class=nx>name</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>().</span><span class=nx>indexOf</span><span class=p>(</span><span class=nx>value</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>())</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>students</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>loadData</span><span class=p>()</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}.</span><span class=nx>height</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>padding</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>zIndex</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=c1>// 让Header位于最上面
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>.</span><span class=nx>backgroundColor</span><span class=p>(</span><span class=nx>Color</span><span class=p>.</span><span class=nx>White</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>   * 显示主体列表
</span></span></span><span class=line><span class=cl><span class=cm>   */</span>
</span></span><span class=line><span class=cl>  <span class=kd>@Builder</span> <span class=nx>Body() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>Scroll() {</span>
</span></span><span class=line><span class=cl>      <span class=nx>Column() {</span>
</span></span><span class=line><span class=cl>        <span class=nx>ForEach</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>students</span><span class=p>,</span> <span class=p>(</span><span class=nx>item</span>: <span class=kt>Student</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>StudentCard</span><span class=p>({</span> <span class=nx>student</span>: <span class=kt>item</span><span class=p>,</span> <span class=nx>closeDialogFunc</span><span class=o>:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>controller</span><span class=p>.</span><span class=nx>close</span><span class=p>()</span> <span class=c1>// 关闭父组件的弹框
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=p>}</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>padding</span><span class=p>({</span> <span class=c1>// 这里要分别留出header和footer的高度
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>bottom</span>: <span class=kt>50</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>top</span>: <span class=kt>100</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>scrollBar</span><span class=p>(</span><span class=nx>BarState</span><span class=p>.</span><span class=nx>Off</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>   * 显示底部按钮
</span></span></span><span class=line><span class=cl><span class=cm>   */</span>
</span></span><span class=line><span class=cl>  <span class=kd>@Builder</span> <span class=nx>Footer() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>Button</span><span class=p>(</span><span class=s1>&#39;取消&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>width</span><span class=p>(</span><span class=s1>&#39;100%&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>height</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>fontSize</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>fontWeight</span><span class=p>(</span><span class=nx>FontWeight</span><span class=p>.</span><span class=nx>Bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>fontColor</span><span class=p>(</span><span class=s1>&#39;#3CBEF5&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>backgroundColor</span><span class=p>(</span><span class=nx>Color</span><span class=p>.</span><span class=nx>White</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=kr>type</span><span class=p>(</span><span class=nx>ButtonType</span><span class=p>.</span><span class=nx>Normal</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>onClick</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>controller</span><span class=p>.</span><span class=nx>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>cancel</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 封装每一行数据
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>@Component</span>
</span></span><span class=line><span class=cl><span class=nx>struct</span> <span class=nx>StudentCard</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>@ObjectLink</span> <span class=nx>student</span>: <span class=kt>Student</span>
</span></span><span class=line><span class=cl>  <span class=kd>@Consume</span> <span class=nx>selectedStudent</span>: <span class=kt>Student</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 关闭父组件的弹框函数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>closeDialogFunc</span><span class=o>?:</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=k>void</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>build() {</span>
</span></span><span class=line><span class=cl>    <span class=nx>Row() {</span>
</span></span><span class=line><span class=cl>      <span class=nx>Text</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>student</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 这里可根据需要调整布局，当前默认让student.name占据除了单选按钮的剩余所有空间
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>.</span><span class=nx>layoutWeight</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nx>Radio</span><span class=p>({</span> <span class=nx>value</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=nx>group</span><span class=o>:</span> <span class=s1>&#39;default&#39;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>checked</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>student</span><span class=p>.</span><span class=nx>isChecked</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>onChange</span><span class=p>(</span><span class=nx>isChecked</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=c1>// 每个单选按钮状态的变化都要同步到student属性isChecked上
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=k>this</span><span class=p>.</span><span class=nx>student</span><span class=p>.</span><span class=nx>isChecked</span> <span class=o>=</span> <span class=nx>isChecked</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nx>isChecked</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>closeDialog</span><span class=p>()</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>border</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>width</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>bottom</span>: <span class=kt>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>color</span><span class=o>:</span> <span class=s1>&#39;#ddd&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>padding</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>justifyContent</span><span class=p>(</span><span class=nx>FlexAlign</span><span class=p>.</span><span class=nx>Center</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>onClick</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>student</span><span class=p>.</span><span class=nx>isChecked</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>closeDialog</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>width</span><span class=p>(</span><span class=s1>&#39;100%&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>closeDialog() {</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>closeDialogFunc</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>selectedStudent</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>student</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>closeDialogFunc</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Observed</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Student</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span>: <span class=kt>number</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span>: <span class=kt>string</span>
</span></span><span class=line><span class=cl>  <span class=nx>isChecked</span>: <span class=kt>boolean</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>id?</span>: <span class=kt>number</span><span class=p>,</span> <span class=nx>name</span>: <span class=kt>string</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=nx>isChecked</span>: <span class=kt>boolean</span> <span class=o>=</span> <span class=kc>false</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>id</span> <span class=o>=</span> <span class=nx>id</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>isChecked</span> <span class=o>=</span> <span class=nx>isChecked</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/arkts/>ArkTs</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section>页面浏览量<span id=busuanzi_value_page_pv>Loading</span></section><section><strong>如果觉得我的博客能帮助到你，欢迎点击右侧的赞助进行投喂。如有技术咨询，也可以加本人好友。</strong></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/harmony-ui-marquee/><div class=article-details><h2 class=article-title>鸿蒙界面开发--跑马灯综合问题</h2></div></a></article><article><a href=/p/harmony-faq/><div class=article-details><h2 class=article-title>鸿蒙界面开发--常见问题</h2></div></a></article><article><a href=/p/harmony-jdlogin/><div class=article-details><h2 class=article-title>鸿蒙界面开发--京东登录页面</h2></div></a></article><article><a href=/p/harmony-bilibili/><div class=article-details><h2 class=article-title>鸿蒙界面开发--B站视频卡片</h2></div></a></article><article><a href=/p/harmony-alipay/><div class=article-details><h2 class=article-title>鸿蒙界面开发--支付宝首页</h2></div></a></article></div></div></aside><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script><link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({avatar:"",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],lang:"zh-cn",locale:{admin:"Admin",placeholder:null},placeholder:"",requiredMeta:["name","email"],serverURL:"https://blog.comment.farb.top",visitor:""})</script><footer class=site-footer><section class=copyright>&copy;
2024 -
2025 Farb's Blog</section><section class=powerby>总访客数：<span id=busuanzi_value_site_uv style=margin-right:10px>Loading</span> 总访问量：<span id=busuanzi_value_site_pv style=margin-right:10px>Loading</span>
<a href=https://eu.umami.is/share/y6kXo4CE3oYHXQ37/farb.github.io style=color:blue target=_blank>实时统计</a><br><span id=span_show_age style=margin-right:30px><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script src=https://cdn.jsdelivr.net/npm/tctip@1.0.4/dist/tctip-1.0.3.min.js></script><script>new tctip({top:"20%",button:{id:8,type:"zanzhu"},list:[{type:"alipay",qrImg:"https://github.com/user-attachments/assets/3ac3da80-aa15-4ab7-bee7-7292a08fcda1"},{type:"wechat",qrImg:"https://github.com/user-attachments/assets/efc07320-351b-45f3-9a89-a938050da4ef"},{type:"weixin",name:"加好友",icon:"https://s3.bmp.ovh/imgs/2024/04/24/6feafb7f63995dfe.png",qrImg:"https://s3.bmp.ovh/imgs/2024/04/24/e2ae8bd59da6e3a8.jpg",desc:"微信:beingBetterSelf"}]}).init()</script><script defer src=https://cn.vercount.one/js></script><script defer src=https://analytics.eu.umami.is/script.js data-website-id=0a12e949-0500-4ff1-872c-b8969b376add></script><script defer language=javascript>var uptime_1="本站已经开心运行 ",uptime_2=" 天 ",uptime_3=" 小时 ",uptime_4=" 分 ",uptime_5=" 秒";function show_date_time(){window.setTimeout(show_date_time,1e3),BirthDay=new Date("4/08/2024 22:54:23"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=24*60*60*1e3,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=(e_daysold-daysold)*24,hrsold=Math.floor(e_hrsold),e_minsold=(e_hrsold-hrsold)*60,minsold=Math.floor((e_hrsold-hrsold)*60),seconds=Math.floor((e_minsold-minsold)*60),document.getElementById("span_show_age").innerHTML=uptime_1+daysold+uptime_2+hrsold+uptime_3+minsold+uptime_4+seconds+uptime_5}show_date_time()</script></body></html>